import{r as I,c as n,o as i,a as y,u as b,h as N,w as h,b as t,i as o,t as s,n as g,d as x,F as p,e as v,l as M,s as f}from"./app-DuLUwTU_.js";import{_ as P}from"./AdminLayout-qrwbdid_.js";import"./ApplicationLogo-uq9fm9QF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-ByflGO8O.js";const S={class:"flex items-center justify-between"},C={class:"flex items-center space-x-4"},T={class:"font-semibold text-xl text-gray-800 leading-tight"},A={class:"flex items-center space-x-2"},L={class:"py-12"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},E={class:"bg-white overflow-hidden shadow rounded-lg"},R={class:"px-4 py-5 sm:p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},F={class:"mt-1 text-sm text-gray-900"},z={class:"mt-1 text-sm text-gray-900"},U={class:"mt-1 text-sm text-gray-900"},K={class:"mt-1 text-sm text-gray-900"},V={class:"mt-1 text-sm text-gray-900"},Z={class:"mt-1 text-sm text-gray-900"},O={class:"mt-1 text-sm text-gray-900"},Y={class:"mt-1 text-sm text-gray-900"},W={class:"mt-1 text-sm text-gray-900"},H={class:"md:col-span-2 lg:col-span-3"},J={class:"mt-1 text-sm text-gray-900"},Q={class:"bg-white overflow-hidden shadow rounded-lg"},q={class:"px-4 py-5 sm:p-6"},$={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},X={class:"mt-1 text-sm text-gray-900"},tt={class:"mt-1 text-sm text-gray-900"},at={class:"mt-1 text-sm text-gray-900"},et={class:"mt-1 text-sm text-gray-900"},st={class:"mt-1 text-sm text-gray-900"},nt={class:"mt-1 text-sm text-gray-900"},it={class:"bg-white overflow-hidden shadow rounded-lg"},lt={class:"px-4 py-5 sm:p-6"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},rt={class:"mt-1 text-lg font-semibold text-gray-900"},dt={class:"mt-1 space-y-2"},mt={class:"flex items-center"},gt={key:0,class:"text-xs text-gray-500"},xt={class:"flex items-center"},ut={key:0,class:"text-xs text-gray-500"},ct={key:0,class:"bg-white overflow-hidden shadow rounded-lg"},yt={class:"px-4 py-5 sm:p-6"},ht={class:"mt-1"},pt=["src","alt"],ft={class:"mt-2"},bt=["href"],vt={key:1,class:"bg-white overflow-hidden shadow rounded-lg"},wt={class:"px-4 py-5 sm:p-6"},Dt={class:"overflow-x-auto"},jt={class:"min-w-full divide-y divide-gray-200"},kt={class:"bg-white divide-y divide-gray-200"},_t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},It={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={key:2,class:"bg-white overflow-hidden shadow rounded-lg"},Tt={class:"px-4 py-5 sm:p-6"},At={class:"overflow-x-auto"},Lt={class:"min-w-full divide-y divide-gray-200"},Bt={class:"bg-white divide-y divide-gray-200"},Et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},zt={class:"bg-white overflow-hidden shadow rounded-lg"},Ut={class:"px-4 py-5 sm:p-6"},Kt={class:"space-y-4"},Vt={key:0},Zt={class:"mt-1 text-sm text-gray-900"},Ot={key:1},Yt={class:"mt-1 text-sm text-gray-900 whitespace-pre-wrap"},Wt={key:2},Ht={class:"mt-1 text-sm text-gray-900 whitespace-pre-wrap"},Jt={class:"bg-gray-50 overflow-hidden shadow rounded-lg"},Qt={class:"px-4 py-5 sm:p-6"},qt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$t={class:"mt-1 text-sm text-gray-900"},Xt={class:"mt-1 text-sm text-gray-900"},ta={class:"mt-1 text-sm text-gray-900"},aa={key:0},ea={class:"mt-1 text-sm text-gray-900"},sa={class:"bg-white px-4 py-5 sm:p-6 shadow rounded-lg"},na={class:"flex flex-wrap gap-4"},ia=["disabled"],la=["disabled"],oa=["disabled"],ua={__name:"PaymentReviewDetail",props:{jamaahData:{type:Object,required:!0}},setup(e){const u=e,d=I(!1),c=l=>l?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l):"Rp 0",w=l=>{switch(l){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-gray-100 text-gray-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=l=>{l.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDlWN0MyMSA1Ljg5NTQzIDIwLjEwNDYgNSAxOSA1SDVDMy44OTU0MyA1IDMgNS44OTU0MyAzIDdWOUgyMVoiIGZpbGw9IiNFNUU3RUIiLz4KPHBhdGggZD0iTTMgOVYxN0MzIDE4LjEwNDYgMy44OTU0MyAxOSA1IDE5SDE5QzIwLjEwNDYgMTkgMjEgMTguMTA0NiAyMSAxN1Y5SDNaIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik05IDEzSDEyVjE2SDlWMTNaIiBmaWxsPSIjRDFENUVCIi8+CjwvcGF0aD4KPC9zdmc+",l.target.alt="Gagal memuat gambar"},j=()=>{d.value=!0,f.patch(route("cs.jamaah.approve.data",u.jamaahData.id),{},{onSuccess:()=>{window.location.reload()},onError:l=>{console.error("CS approval error:",l),alert("Gagal approve data jamaah")},onFinish:()=>{d.value=!1}})},k=()=>{d.value=!0,f.patch(route("admin.jamaah.approve.payment",u.jamaahData.id),{},{onSuccess:()=>{window.location.reload()},onError:l=>{console.error("Admin approval error:",l),alert("Gagal approve pembayaran")},onFinish:()=>{d.value=!1}})},_=()=>{confirm("Apakah Anda yakin ingin menolak pembayaran ini? Jamaah akan diminta upload ulang bukti transfer.")&&(d.value=!0,f.patch(route("admin.jamaah.reject.payment",u.jamaahData.id),{},{onSuccess:()=>{window.location.reload()},onError:l=>{console.error("Payment rejection error:",l),alert("Gagal reject pembayaran")},onFinish:()=>{d.value=!1}}))};return(l,a)=>(i(),n(p,null,[y(b(N),{title:`Detail Payment Review - ${e.jamaahData.nama_lengkap}`},null,8,["title"]),y(P,null,{header:h(()=>[t("div",S,[t("div",C,[y(b(M),{href:l.route("admin.payment.review"),class:"text-gray-500 hover:text-gray-700"},{default:h(()=>[...a[0]||(a[0]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t("h2",T," Detail Payment Review - "+s(e.jamaahData.nama_lengkap),1)]),t("div",A,[t("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",w(e.jamaahData.status)])},s(e.jamaahData.status_display),3)])])]),default:h(()=>[t("div",L,[t("div",B,[t("div",E,[t("div",R,[a[11]||(a[11]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Data Pribadi",-1)),t("div",G,[t("div",null,[a[1]||(a[1]=t("label",{class:"text-sm font-medium text-gray-500"},"Nama Lengkap",-1)),t("p",F,s(e.jamaahData.nama_lengkap||"-"),1)]),t("div",null,[a[2]||(a[2]=t("label",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("p",z,s(e.jamaahData.email||"-"),1)]),t("div",null,[a[3]||(a[3]=t("label",{class:"text-sm font-medium text-gray-500"},"NIK",-1)),t("p",U,s(e.jamaahData.nik||"-"),1)]),t("div",null,[a[4]||(a[4]=t("label",{class:"text-sm font-medium text-gray-500"},"Jenis Kelamin",-1)),t("p",K,s(e.jamaahData.jenis_kelamin==="L"?"Laki-laki":e.jamaahData.jenis_kelamin==="P"?"Perempuan":"-"),1)]),t("div",null,[a[5]||(a[5]=t("label",{class:"text-sm font-medium text-gray-500"},"Tempat Lahir",-1)),t("p",V,s(e.jamaahData.tempat_lahir||"-"),1)]),t("div",null,[a[6]||(a[6]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Lahir",-1)),t("p",Z,s(e.jamaahData.tanggal_lahir||"-"),1)]),t("div",null,[a[7]||(a[7]=t("label",{class:"text-sm font-medium text-gray-500"},"Usia",-1)),t("p",O,s(e.jamaahData.usia?e.jamaahData.usia+" tahun":"-"),1)]),t("div",null,[a[8]||(a[8]=t("label",{class:"text-sm font-medium text-gray-500"},"No. Telepon",-1)),t("p",Y,s(e.jamaahData.no_telepon||"-"),1)]),t("div",null,[a[9]||(a[9]=t("label",{class:"text-sm font-medium text-gray-500"},"Pekerjaan",-1)),t("p",W,s(e.jamaahData.pekerjaan||"-"),1)]),t("div",H,[a[10]||(a[10]=t("label",{class:"text-sm font-medium text-gray-500"},"Alamat",-1)),t("p",J,s(e.jamaahData.alamat||"-"),1)])])])]),t("div",Q,[t("div",q,[a[18]||(a[18]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Informasi Paket Umroh",-1)),t("div",$,[t("div",null,[a[12]||(a[12]=t("label",{class:"text-sm font-medium text-gray-500"},"Paket ID",-1)),t("p",X,s(e.jamaahData.paket_id||"-"),1)]),t("div",null,[a[13]||(a[13]=t("label",{class:"text-sm font-medium text-gray-500"},"Nama Marketing",-1)),t("p",tt,s(e.jamaahData.nama_marketing||"-"),1)]),t("div",null,[a[14]||(a[14]=t("label",{class:"text-sm font-medium text-gray-500"},"Rencana Keberangkatan",-1)),t("p",at,s(e.jamaahData.rencana_keberangkatan||"-"),1)]),t("div",null,[a[15]||(a[15]=t("label",{class:"text-sm font-medium text-gray-500"},"Program Talangan",-1)),t("p",et,[t("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.jamaahData.program_talangan?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},s(e.jamaahData.program_talangan?"Ya":"Tidak"),3)])]),t("div",null,[a[16]||(a[16]=t("label",{class:"text-sm font-medium text-gray-500"},"Sistem Pembayaran",-1)),t("p",st,s(e.jamaahData.sistem_pembayaran||"-"),1)]),t("div",null,[a[17]||(a[17]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Pelunasan",-1)),t("p",nt,s(e.jamaahData.tgl_pelunasan||"-"),1)])])])]),t("div",it,[t("div",lt,[a[21]||(a[21]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Informasi Pembayaran",-1)),t("div",ot,[t("div",null,[a[19]||(a[19]=t("label",{class:"text-sm font-medium text-gray-500"},"Jumlah DP",-1)),t("p",rt,s(c(e.jamaahData.dp_paid)),1)]),t("div",null,[a[20]||(a[20]=t("label",{class:"text-sm font-medium text-gray-500"},"Status Pembayaran",-1)),t("div",dt,[t("div",mt,[t("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mr-2",e.jamaahData.data_approved_by_cs?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])}," CS: "+s(e.jamaahData.data_approved_by_cs?"Approved":"Pending"),3),e.jamaahData.cs_approval_at?(i(),n("span",gt,s(e.jamaahData.cs_approval_at),1)):o("",!0)]),t("div",xt,[t("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mr-2",e.jamaahData.payment_approved_by_admin?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])}," Admin: "+s(e.jamaahData.payment_approved_by_admin?"Approved":"Pending"),3),e.jamaahData.admin_approval_at?(i(),n("span",ut,s(e.jamaahData.admin_approval_at),1)):o("",!0)])])])])])]),e.jamaahData.bukti_transfer?(i(),n("div",ct,[t("div",yt,[a[23]||(a[23]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Bukti Transfer",-1)),t("div",ht,[t("img",{src:`/storage/${e.jamaahData.bukti_transfer}`,alt:"Bukti transfer "+e.jamaahData.nama_lengkap,class:"max-w-md h-auto rounded-lg shadow-md border border-gray-200",onError:D},null,40,pt),t("div",ft,[t("a",{href:`/storage/${e.jamaahData.bukti_transfer}`,target:"_blank",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[...a[22]||(a[22]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),x(" Lihat Full Size ",-1)])],8,bt)])])])])):o("",!0),e.jamaahData.jamaah_rombongan&&e.jamaahData.jamaah_rombongan.length>0?(i(),n("div",vt,[t("div",wt,[a[25]||(a[25]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Jamaah Rombongan",-1)),t("div",Dt,[t("table",jt,[a[24]||(a[24]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Nama"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," NIK"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tempat/Tgl Lahir"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," JK"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No. Telp")])],-1)),t("tbody",kt,[(i(!0),n(p,null,v(e.jamaahData.jamaah_rombongan,(r,m)=>(i(),n("tr",{key:m},[t("td",_t,s(m+1),1),t("td",It,s(r.nama||"-"),1),t("td",Nt,s(r.nik||"-"),1),t("td",Mt,s(r.tempat_tanggal_lahir||"-"),1),t("td",Pt,s(r.jenis_kelamin==="L"?"L":r.jenis_kelamin==="P"?"P":"-"),1),t("td",St,s(r.no_telp||"-"),1)]))),128))])])])])])):o("",!0),e.jamaahData.cicilan_data&&e.jamaahData.cicilan_data.length>0?(i(),n("div",Ct,[t("div",Tt,[a[27]||(a[27]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Data Cicilan",-1)),t("div",At,[t("table",Lt,[a[26]||(a[26]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," DP"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tenor"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cicilan/Bulan")])],-1)),t("tbody",Bt,[(i(!0),n(p,null,v(e.jamaahData.cicilan_data,(r,m)=>(i(),n("tr",{key:m},[t("td",Et,s(m+1),1),t("td",Rt,s(c(r.dp)),1),t("td",Gt,s(r.tenor)+" bulan ",1),t("td",Ft,s(c(r.cicilan_perbulan)),1)]))),128))])])])])])):o("",!0),t("div",zt,[t("div",Ut,[a[31]||(a[31]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Informasi Tambahan",-1)),t("div",Kt,[e.jamaahData.sumber_info_mmb?(i(),n("div",Vt,[a[28]||(a[28]=t("label",{class:"text-sm font-medium text-gray-500"},"Sumber Info MMB",-1)),t("p",Zt,s(e.jamaahData.sumber_info_mmb),1)])):o("",!0),e.jamaahData.kelengkapan_dokumen?(i(),n("div",Ot,[a[29]||(a[29]=t("label",{class:"text-sm font-medium text-gray-500"},"Kelengkapan Dokumen",-1)),t("p",Yt,s(e.jamaahData.kelengkapan_dokumen),1)])):o("",!0),e.jamaahData.request_khusus?(i(),n("div",Wt,[a[30]||(a[30]=t("label",{class:"text-sm font-medium text-gray-500"},"Request Khusus",-1)),t("p",Ht,s(e.jamaahData.request_khusus),1)])):o("",!0)])])]),t("div",Jt,[t("div",Qt,[a[36]||(a[36]=t("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Informasi Sistem",-1)),t("div",qt,[t("div",null,[a[32]||(a[32]=t("label",{class:"text-sm font-medium text-gray-500"},"Current Step",-1)),t("p",$t,s(e.jamaahData.current_step)+" - "+s(e.jamaahData.step_name),1)]),t("div",null,[a[33]||(a[33]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Daftar",-1)),t("p",Xt,s(e.jamaahData.created_at),1)]),t("div",null,[a[34]||(a[34]=t("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Update",-1)),t("p",ta,s(e.jamaahData.updated_at),1)]),e.jamaahData.registration_completed_at?(i(),n("div",aa,[a[35]||(a[35]=t("label",{class:"text-sm font-medium text-gray-500"},"Registrasi Selesai",-1)),t("p",ea,s(e.jamaahData.registration_completed_at),1)])):o("",!0)])])]),t("div",sa,[t("div",na,[e.jamaahData.can_cs_approve&&!e.jamaahData.data_approved_by_cs?(i(),n("button",{key:0,onClick:j,disabled:d.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},[...a[37]||(a[37]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),x(" Approve oleh CS ",-1)])],8,ia)):o("",!0),e.jamaahData.can_admin_approve&&!e.jamaahData.payment_approved_by_admin?(i(),n("button",{key:1,onClick:k,disabled:d.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[...a[38]||(a[38]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),x(" Approve Pembayaran ",-1)])],8,la)):o("",!0),e.jamaahData.can_admin_approve&&e.jamaahData.payment_approved_by_admin?(i(),n("button",{key:2,onClick:_,disabled:d.value,class:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50"},[...a[39]||(a[39]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),x(" Reject Pembayaran ",-1)])],8,oa)):o("",!0)])])])])]),_:1})],64))}};export{ua as default};
