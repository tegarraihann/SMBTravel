import{B as k,c as l,o,b as e,k as y,t as r,J as O,F as h,e as v,q as i,d as R}from"./app-Cbx_-bua.js";const q={class:"w-full bg-white rounded-lg border border-gray-200 p-6 mb-8"},E={class:"flex items-center justify-between mb-6"},$={class:"text-sm text-gray-500"},G={class:"relative"},H={class:"relative flex justify-between"},Q={key:0,class:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},W={class:"mt-3 text-center"},X={key:0,class:"mt-2"},Y={key:0,class:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Z={class:"text-sm font-semibold text-blue-900 mb-2"},ee={class:"text-sm text-blue-700 mb-3"},te={key:0,class:"mb-4"},ae={class:"bg-white rounded-lg border border-blue-200 p-4"},ne={class:"flex items-center justify-between py-2 border-b border-gray-100"},se={class:"flex items-center"},re={class:"text-xs text-gray-500"},ie={class:"flex items-center justify-between py-2 border-b border-gray-100"},le={class:"flex items-center"},oe={class:"text-xs text-gray-500"},ue={class:"flex items-center justify-between py-2 border-b border-gray-100"},de={class:"flex items-center"},ce={class:"text-xs text-gray-500"},pe={class:"flex items-center justify-between py-2"},me={class:"flex items-center"},ge={class:"text-xs text-gray-500"},be={key:1,class:"flex flex-wrap gap-2"},ye=["onClick"],xe={key:1,class:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},fe={class:"text-sm text-gray-700 space-y-1"},ke={class:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},he={class:"flex flex-wrap gap-2"},ve=["onClick"],_=4,we={__name:"ProgressBar",props:{currentStep:{type:Number,default:1},jamaahData:{type:Object,default:()=>({})}},emits:["step-action","navigate-to-step"],setup(u,{emit:j}){const s=u,d=j,P=[{id:1,title:"Pendaftaran & Dokumen",subtitle:"Data Pribadi + Upload",status:s.currentStep>1?"completed":s.currentStep===1?"current":"pending"},{id:2,title:"Pembayaran DP",subtitle:"Down Payment",status:s.currentStep>2?"completed":s.currentStep===2?"current":"pending"},{id:3,title:"Pelunasan & Manasik",subtitle:"Pembayaran & Persiapan",status:s.currentStep>3?"completed":s.currentStep===3?"current":"pending"},{id:4,title:"Keberangkatan",subtitle:"Siap Berangkat",status:s.currentStep>=4?"completed":"pending"}],D=k(()=>({1:0,2:1,3:2,4:3}[s.currentStep]||0)/(_-1)*100),g=k(()=>({1:{title:"Lengkapi Data Pendaftaran & Upload Dokumen",description:"Silakan lengkapi data pribadi, pilih paket umroh, dan upload dokumen persyaratan (KTP, KK, Paspor, Foto).",actions:[{label:"Lanjutkan Pendaftaran",primary:!0,handler:()=>d("step-action","continue-registration")}]},2:{title:"Pembayaran Down Payment",description:"Lakukan pembayaran DP minimal Rp 1.000.000 untuk mengkonfirmasi tempat Anda.",actions:[{label:"Bayar Sekarang",primary:!0,handler:()=>d("step-action","pay-dp")},{label:"Lihat Detail Pembayaran",primary:!1,handler:()=>d("step-action","view-payment-details")}]},3:{title:"Pelunasan & Manasik",description:"Tahap akhir persiapan sebelum keberangkatan dengan verifikasi, pelunasan, dan manasik.",actions:[{label:"Cek Status Verifikasi",primary:!1,handler:()=>d("step-action","check-verification-status")},{label:"Bayar Pelunasan",primary:!0,handler:()=>d("step-action","pay-remaining-balance")},{label:"Jadwal Manasik",primary:!1,handler:()=>d("step-action","view-manasik-schedule")}]},4:{title:"Siap Berangkat",description:"Selamat! Anda sudah siap untuk berangkat umroh. Semoga Allah mudahkan perjalanan Anda.",actions:[{label:"Lihat Itinerary",primary:!0,handler:()=>d("step-action","view-itinerary")}]}})[s.currentStep]||null),w=k(()=>({1:["Pastikan semua data pribadi sudah benar","Upload semua dokumen yang diperlukan","Setelah mendaftar, lakukan pembayaran DP minimal Rp 1.000.000"],2:["Upload bukti pembayaran DP","Tunggu verifikasi dari admin","Lanjutkan ke pelunasan pembayaran"],3:["Lunasi sisa pembayaran paket umroh","Ikuti sesi manasik umroh","Persiapan dokumen keberangkatan"],4:[]})[s.currentStep]||[]),C=t=>({"opacity-50":t>s.currentStep}),M=t=>t<s.currentStep||t===s.currentStep?"border-blue-600 bg-blue-600":"border-gray-300",T=t=>{const a={completed:"bg-green-100 text-green-800",current:"bg-blue-100 text-blue-800",pending:"bg-gray-100 text-gray-600",waiting:"bg-yellow-100 text-yellow-800",rejected:"bg-red-100 text-red-800"};return a[t]||a.pending},B=t=>({completed:"Selesai",current:"Aktif",pending:"Menunggu",waiting:"Proses",rejected:"Ditolak"})[t]||"Menunggu",A=k(()=>[{id:1,displayNumber:1,title:"Pendaftaran & Dokumen"},{id:2,displayNumber:2,title:"Pembayaran DP"},{id:3,displayNumber:3,title:"Pelunasan & Manasik"},{id:4,displayNumber:4,title:"Keberangkatan"}]),L=t=>{d("navigate-to-step",t)},c=()=>{const t=s.jamaahData.documents_verified||!1,a=s.jamaahData.data_approved_by_cs||!1,n=s.jamaahData.payment_approved_by_admin||!1;return t&&a&&n?"completed":t||a||n?"partial":"pending"},p=()=>{const t=s.jamaahData.is_program_talangan||!1,a=s.jamaahData.is_payment_complete||!1;if(t){const n=(s.jamaahData.total_outstanding||0)>0;return a&&!n?"completed":"pending"}else{const n=s.jamaahData.payment_approved_by_admin||!1,S=s.jamaahData.data_approved_by_cs||!1;return n&&S?"completed":"pending"}},m=()=>{const t=s.jamaahData.documents_verified||!1,a=s.jamaahData.data_approved_by_cs||!1;return t&&a?"completed":t||a?"partial":"pending"},b=()=>{const t=c()==="completed",a=p()==="completed",n=m()==="completed";return t&&a&&n?"available":"locked"},N=()=>{const t=c();return{"bg-green-500 text-white":t==="completed","bg-yellow-500 text-white":t==="partial","bg-gray-300 text-gray-600":t==="pending"}},V=()=>{const t=p();return{"bg-green-500 text-white":t==="completed","bg-blue-500 text-white":t==="pending"}},I=()=>{const t=m();return{"bg-green-500 text-white":t==="completed","bg-yellow-500 text-white":t==="partial","bg-gray-300 text-gray-600":t==="pending"}},K=()=>{const t=b();return{"bg-purple-500 text-white":t==="available","bg-gray-300 text-gray-600":t==="locked"}},U=()=>{const t=c();return{completed:"Dokumen telah diverifikasi, data disetujui CS, dan pembayaran DP disetujui admin",partial:"Menunggu verifikasi dokumen, persetujuan CS, atau persetujuan admin",pending:"Menunggu verifikasi dokumen, persetujuan CS, dan verifikasi pembayaran DP"}[t]},F=()=>{const t=p(),a=s.jamaahData.is_program_talangan||!1,n=s.jamaahData.is_full_payment_upfront||!1;return t==="completed"?a?"Semua cicilan telah lunas":n?"Pembayaran lunas 100% (dibayar penuh di awal)":"DP dan pelunasan telah dibayar dan disetujui":a?"Masih ada cicilan yang belum dibayar":n?"Menunggu persetujuan pembayaran penuh":"Menunggu pelunasan setelah DP disetujui"},z=()=>{const t=m();return{completed:"Dokumen telah diverifikasi dan disetujui",partial:"Menunggu verifikasi dokumen atau persetujuan CS",pending:"Menunggu verifikasi dokumen dan persetujuan CS"}[t]},J=()=>{const t=b();return{available:"Siap mengikuti jadwal manasik",locked:"Tersedia setelah verifikasi, dokumen, dan pelunasan selesai"}[t]},x=t=>({completed:"bg-green-100 text-green-800",partial:"bg-yellow-100 text-yellow-800",pending:"bg-gray-100 text-gray-600",available:"bg-purple-100 text-purple-800",locked:"bg-gray-100 text-gray-600"})[t]||"bg-gray-100 text-gray-600",f=t=>({completed:"Selesai",partial:"Sebagian",pending:"Menunggu",available:"Tersedia",locked:"Terkunci"})[t]||"Menunggu";return(t,a)=>(o(),l("div",q,[e("div",E,[a[0]||(a[0]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Status Pendaftaran",-1)),e("span",$," Step "+r(u.currentStep)+" dari "+r(_),1)]),e("div",G,[a[2]||(a[2]=e("div",{class:"absolute top-5 left-0 w-full h-0.5 bg-gray-200"},null,-1)),e("div",{class:"absolute top-5 left-0 h-0.5 bg-blue-600 transition-all duration-500 ease-in-out",style:O({width:D.value+"%"})},null,4),e("div",H,[(o(),l(h,null,v(P,(n,S)=>e("div",{key:n.id,class:i(["flex flex-col items-center",C(n.id)])},[e("div",{class:i(["w-10 h-10 rounded-full border-2 flex items-center justify-center bg-white transition-all duration-300",M(n.id)])},[n.id<u.currentStep?(o(),l("svg",Q,[...a[1]||(a[1]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(o(),l("span",{key:1,class:i(["text-sm font-semibold",n.id===u.currentStep?"text-white":"text-gray-400"])},r(n.id),3))],2),e("div",W,[e("p",{class:i(["text-sm font-medium",n.id<=u.currentStep?"text-gray-900":"text-gray-400"])},r(n.title),3),e("p",{class:i(["text-xs mt-1",n.id<=u.currentStep?"text-gray-600":"text-gray-400"])},r(n.subtitle),3)]),n.status?(o(),l("div",X,[e("span",{class:i(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",T(n.status)])},r(B(n.status)),3)])):y("",!0)],2)),64))])]),g.value?(o(),l("div",Y,[e("h4",Z,r(g.value.title),1),e("p",ee,r(g.value.description),1),u.currentStep===3?(o(),l("div",te,[e("div",ae,[a[7]||(a[7]=e("h5",{class:"text-sm font-semibold text-gray-900 mb-3"},"Progress Sub-steps:",-1)),e("div",ne,[e("div",se,[e("div",{class:i(["w-6 h-6 rounded-full mr-3 flex items-center justify-center text-xs font-semibold",N()])},r(c()==="completed"?"✓":"A"),3),e("div",null,[a[3]||(a[3]=e("p",{class:"text-sm font-medium text-gray-900"},"Verifikasi Dokumen & Pembayaran",-1)),e("p",re,r(U()),1)])]),e("span",{class:i(["px-2 py-1 text-xs rounded-full",x(c())])},r(f(c())),3)]),e("div",ie,[e("div",le,[e("div",{class:i(["w-6 h-6 rounded-full mr-3 flex items-center justify-center text-xs font-semibold",V()])},r(p()==="completed"?"✓":"B"),3),e("div",null,[a[4]||(a[4]=e("p",{class:"text-sm font-medium text-gray-900"},"Status Pelunasan",-1)),e("p",oe,r(F()),1)])]),e("span",{class:i(["px-2 py-1 text-xs rounded-full",x(p())])},r(f(p())),3)]),e("div",ue,[e("div",de,[e("div",{class:i(["w-6 h-6 rounded-full mr-3 flex items-center justify-center text-xs font-semibold",I()])},r(m()==="completed"?"✓":"C"),3),e("div",null,[a[5]||(a[5]=e("p",{class:"text-sm font-medium text-gray-900"},"Status Dokumen",-1)),e("p",ce,r(z()),1)])]),e("span",{class:i(["px-2 py-1 text-xs rounded-full",x(m())])},r(f(m())),3)]),e("div",pe,[e("div",me,[e("div",{class:i(["w-6 h-6 rounded-full mr-3 flex items-center justify-center text-xs font-semibold",K()])},r(b()==="completed"?"✓":"D"),3),e("div",null,[a[6]||(a[6]=e("p",{class:"text-sm font-medium text-gray-900"},"Jadwal Manasik",-1)),e("p",ge,r(J()),1)])]),e("span",{class:i(["px-2 py-1 text-xs rounded-full",x(b())])},r(f(b())),3)])])])):y("",!0),g.value.actions?(o(),l("div",be,[(o(!0),l(h,null,v(g.value.actions,n=>(o(),l("button",{key:n.label,onClick:n.handler,class:i(["px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200",n.primary?"bg-blue-600 hover:bg-blue-700 text-white":"bg-white hover:bg-gray-50 text-blue-600 border border-blue-300"])},r(n.label),11,ye))),128))])):y("",!0)])):y("",!0),w.value.length>0?(o(),l("div",xe,[a[9]||(a[9]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-2"},"Langkah Selanjutnya:",-1)),e("ul",fe,[(o(!0),l(h,null,v(w.value,n=>(o(),l("li",{key:n,class:"flex items-start"},[a[8]||(a[8]=e("span",{class:"w-1.5 h-1.5 bg-gray-400 rounded-full mt-2 mr-2 flex-shrink-0"},null,-1)),R(" "+r(n),1)]))),128))])])):y("",!0),e("div",ke,[a[10]||(a[10]=e("h4",{class:"text-sm font-semibold text-yellow-900 mb-3"},"🧪 Testing Navigation:",-1)),e("div",he,[(o(!0),l(h,null,v(A.value,n=>(o(),l("button",{key:n.id,onClick:S=>L(n.id),class:i(["px-3 py-2 text-xs font-medium rounded-md transition-colors duration-200",n.id===u.currentStep?"bg-yellow-600 text-white":"bg-white hover:bg-yellow-100 text-yellow-700 border border-yellow-300"])}," Step "+r(n.displayNumber)+": "+r(n.title),11,ve))),128))]),a[11]||(a[11]=e("p",{class:"text-xs text-yellow-700 mt-2"}," ⚠️ Untuk testing saja - navigasi ini akan dihapus di production ",-1))])]))}};export{we as _};
