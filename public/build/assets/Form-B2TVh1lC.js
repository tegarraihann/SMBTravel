import{r as V,A as N,c as n,o as d,a as y,u as a,h as B,w as k,b as e,x as S,t as m,m as i,k as p,q as x,n as b,v as C,d as h,F as M,e as T,l as U,y as j}from"./app-Cbx_-bua.js";import{_ as F}from"./AdminLayout-m-tUBPSK.js";import"./ApplicationLogo-DKH-H1_m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CizZqq9U.js";const z={class:"flex items-center space-x-4"},$={class:"font-semibold text-xl text-gray-800 leading-tight"},q={class:"py-12"},H={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},K={class:"p-6 border-b border-gray-200"},D={class:"mt-1 text-sm text-gray-600"},L={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},O=["value"],P={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},Q={key:0,class:"mt-1 text-sm text-red-600"},R={class:"md:col-span-2"},W={key:0,class:"mt-1 text-sm text-red-600"},X={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Y={class:"p-6"},Z={key:0,class:"text-center py-8"},ee={key:1,class:"space-y-4"},te={class:"flex justify-between items-start mb-4"},se={class:"text-sm font-medium text-gray-900"},oe=["onClick"],le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae=["onUpdate:modelValue"],re={key:0,class:"mt-1 text-sm text-red-600"},ne=["onUpdate:modelValue"],de=["onUpdate:modelValue"],ie=["onUpdate:modelValue"],ue=["onUpdate:modelValue"],me=["onUpdate:modelValue"],be={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ge={class:"p-6 flex justify-end space-x-3"},ce=["disabled"],pe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},he={__name:"Form",props:{item:Object,isEdit:{type:Boolean,default:!1},suggestedCode:String},setup(f){const u=f,v=V(!1),s=V({}),l=N({name:u.item?.name||"",phone:u.item?.phone||"",email:u.item?.email||"",status:u.item?.status||"active",notes:u.item?.notes||"",agents:u.item?.agents||[]});let _=1e3;const w=()=>{l.agents.push({tempId:_++,name:"",phone:"",email:"",commission_rate:0,status:"active",notes:""})},E=g=>{const t=l.agents[g];t.id&&u.isEdit?t._delete=!0:l.agents.splice(g,1)},A=()=>{v.value=!0,s.value={};const g=u.isEdit?route("admin.marketing.update",u.item.id):route("admin.marketing.store"),t=u.isEdit?"put":"post";l[t](g,{onSuccess:()=>{j.visit(route("admin.marketing.index"),{onFinish:()=>{v.value=!1}})},onError:o=>{s.value=o,v.value=!1},onFinish:()=>{v.value=!1}})};return(g,t)=>(d(),n(M,null,[y(a(B),{title:f.isEdit?"Edit Marketing":"Tambah Marketing"},null,8,["title"]),y(F,null,{header:k(()=>[e("div",z,[y(a(U),{href:g.route("admin.marketing.index"),class:"text-gray-500 hover:text-gray-700"},{default:k(()=>[...t[5]||(t[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1},8,["href"]),e("h2",$,m(f.isEdit?"Edit Marketing":"Tambah Marketing"),1)])]),default:k(()=>[e("div",q,[e("div",H,[e("form",{onSubmit:S(A,["prevent"]),class:"space-y-6"},[e("div",I,[e("div",K,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900"},"Informasi Marketing",-1)),e("p",D,m(f.isEdit?"Edit data marketing yang sudah ada":"Masukkan data marketing baru"),1)]),e("div",L,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Kode Marketing",-1)),e("input",{type:"text",value:f.suggestedCode,disabled:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500"},null,8,O),t[8]||(t[8]=e("p",{class:"mt-1 text-xs text-gray-500"},"Kode otomatis berdasarkan urutan",-1))]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nama *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a(l).name=o),class:x([{"border-red-300":s.value.name,"border-gray-300":!s.value.name},"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"]),placeholder:"Masukkan nama marketing",required:""},null,2),[[b,a(l).name]]),s.value.name?(d(),n("p",P,m(s.value.name),1)):p("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nomor Telepon",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>a(l).phone=o),class:x([{"border-red-300":s.value.phone,"border-gray-300":!s.value.phone},"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"]),placeholder:"Contoh: 08123456789"},null,2),[[b,a(l).phone]]),s.value.phone?(d(),n("p",G,m(s.value.phone),1)):p("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),i(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=o=>a(l).email=o),class:x([{"border-red-300":s.value.email,"border-gray-300":!s.value.email},"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"]),placeholder:"contoh@email.com"},null,2),[[b,a(l).email]]),s.value.email?(d(),n("p",J,m(s.value.email),1)):p("",!0)]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status *",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>a(l).status=o),class:x([{"border-red-300":s.value.status,"border-gray-300":!s.value.status},"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"]),required:""},[...t[12]||(t[12]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Non Aktif",-1)])],2),[[C,a(l).status]]),s.value.status?(d(),n("p",Q,m(s.value.status),1)):p("",!0)]),e("div",R,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catatan",-1)),i(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>a(l).notes=o),rows:"3",class:x([{"border-red-300":s.value.notes,"border-gray-300":!s.value.notes},"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"]),placeholder:"Catatan tambahan tentang marketing ini..."},null,2),[[b,a(l).notes]]),s.value.notes?(d(),n("p",W,m(s.value.notes),1)):p("",!0)])])]),e("div",X,[e("div",{class:"p-6 border-b border-gray-200"},[e("div",{class:"flex justify-between items-center"},[t[16]||(t[16]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Agen Marketing"),e("p",{class:"mt-1 text-sm text-gray-600"}," Kelola agen yang berada di bawah marketing ini ")],-1)),e("button",{type:"button",onClick:w,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[...t[15]||(t[15]=[e("svg",{class:"-ml-0.5 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),h(" Tambah Agen ",-1)])])])]),e("div",Y,[a(l).agents.length===0?(d(),n("div",Z,[t[17]||(t[17]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[18]||(t[18]=e("p",{class:"mt-2 text-sm text-gray-600"},"Belum ada agen ditambahkan",-1)),e("button",{type:"button",onClick:w,class:"mt-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Tambah Agen Pertama ")])):(d(),n("div",ee,[(d(!0),n(M,null,T(a(l).agents,(o,c)=>(d(),n("div",{key:o.tempId||o.id||c,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},[e("div",te,[e("h4",se,"Agen #"+m(c+1),1),e("button",{type:"button",onClick:r=>E(c),class:"text-red-600 hover:text-red-900 text-sm"}," Hapus ",8,oe)]),e("div",le,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nama Agen *",-1)),i(e("input",{type:"text","onUpdate:modelValue":r=>o.name=r,class:x([{"border-red-300":s.value[`agents.${c}.name`],"border-gray-300":!s.value[`agents.${c}.name`]},"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"]),placeholder:"Nama agen",required:""},null,10,ae),[[b,o.name]]),s.value[`agents.${c}.name`]?(d(),n("p",re,m(s.value[`agents.${c}.name`]),1)):p("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nomor Telepon",-1)),i(e("input",{type:"text","onUpdate:modelValue":r=>o.phone=r,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"08123456789"},null,8,ne),[[b,o.phone]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),i(e("input",{type:"email","onUpdate:modelValue":r=>o.email=r,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"agen@email.com"},null,8,de),[[b,o.email]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Komisi (%)",-1)),i(e("input",{type:"number","onUpdate:modelValue":r=>o.commission_rate=r,min:"0",max:"100",step:"0.01",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"},null,8,ie),[[b,o.commission_rate]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Status *",-1)),i(e("select",{"onUpdate:modelValue":r=>o.status=r,class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:""},[...t[23]||(t[23]=[e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Non Aktif",-1)])],8,ue),[[C,o.status]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catatan",-1)),i(e("textarea",{"onUpdate:modelValue":r=>o.notes=r,rows:"2",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Catatan untuk agen ini..."},null,8,me),[[b,o.notes]])])])]))),128))]))])]),e("div",be,[e("div",ge,[y(a(U),{href:g.route("admin.marketing.index"),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:k(()=>[...t[26]||(t[26]=[h(" Batal ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:v.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50"},[v.value?(d(),n("svg",pe,[...t[27]||(t[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):p("",!0),h(" "+m(f.isEdit?"Update":"Simpan"),1)],8,ce)])])],32)])])]),_:1})],64))}};export{he as default};
