import{r as n,z as w,c as l,o as r,a as d,u as p,h as _,w as u,b as e,i as c,t as m,q as j,j as P,k as D,l as B,d as M,F,s as b}from"./app-DuLUwTU_.js";import{_ as U}from"./AuthenticatedLayout-SV__XKGo.js";import"./ApplicationLogo-uq9fm9QF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-ByflGO8O.js";const C={class:"py-12"},z={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},N={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},T={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},V={class:"p-6"},I={class:"space-y-4"},L={class:"border-l-4 border-blue-500 pl-4"},S={class:"font-semibold"},q={class:"border-l-4 border-green-500 pl-4"},A={class:"text-xl font-bold text-green-600"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6"},E={class:"relative"},H={class:"border-2 border-dashed border-gray-300 rounded-lg p-6"},J={class:"text-center"},K={class:"mt-4"},O={class:"cursor-pointer"},W={key:0,class:"mt-3 p-3 bg-green-50 border border-green-200 rounded-md"},Y={class:"flex items-center"},$={class:"ml-2 text-sm text-green-700"},Q={class:"flex items-center justify-between"},X=["disabled"],Z={key:0},ee={key:1},te={key:0,class:"mt-8 bg-white overflow-hidden shadow-sm sm:rounded-lg"},ne={__name:"Pembayaran",props:{jamaahData:{type:Object,required:!0}},setup(f){const s=n({dp_amount:5e6,bukti_transfer:null}),i=n(null),o=n(!1),v=n(null),g=w(()=>s.value.dp_amount||5e6),x=a=>new Intl.NumberFormat("id-ID").format(a),y=a=>{const t=a.target.files[0];if(t){if(t.size>2*1024*1024){alert("File terlalu besar. Maksimal 2MB.");return}if(!t.type.startsWith("image/")){alert("File harus berupa gambar.");return}i.value=t,s.value.bukti_transfer=t}},h=async()=>{if(!s.value.bukti_transfer){alert("Pilih file bukti transfer terlebih dahulu");return}if(!s.value.dp_amount||s.value.dp_amount<=0){alert("Masukkan nominal transfer yang valid");return}o.value=!0;const a=new FormData;a.append("bukti_transfer",s.value.bukti_transfer),a.append("dp_amount",s.value.dp_amount),b.post(route("jamaah.pembayaran.upload"),a,{forceFormData:!0,onSuccess:t=>{console.log("Upload success:",t),alert("Bukti pembayaran berhasil diupload! Menunggu verifikasi admin."),b.visit(route("jamaah.dashboard"))},onError:t=>{console.error("Upload error:",t),console.log("Full error object:",t),alert("Gagal upload bukti transfer: "+(t.message||Object.keys(t).join(", ")||"Terjadi kesalahan"))},onFinish:()=>{o.value=!1}})};return(a,t)=>(r(),l(F,null,[d(p(_),{title:"Pembayaran DP"}),d(U,null,{header:u(()=>[...t[1]||(t[1]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Pembayaran DP Umroh ",-1)])]),default:u(()=>[e("div",C,[e("div",z,[t[18]||(t[18]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",{class:"flex items-center"},[e("div",{class:"flex items-center text-green-600"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-green-600 rounded-full"},[e("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])]),e("span",{class:"ml-2 text-sm font-medium"},"Data Diri")])]),e("div",{class:"flex-1 mx-4 h-1 bg-gray-200"},[e("div",{class:"h-1 bg-blue-600 w-1/2"})]),e("div",{class:"flex items-center text-blue-600"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-blue-600 rounded-full"},[e("span",{class:"text-white text-sm font-bold"},"2")]),e("span",{class:"ml-2 text-sm font-medium"},"Pembayaran DP")]),e("div",{class:"flex-1 mx-4 h-1 bg-gray-200"}),e("div",{class:"flex items-center text-gray-400"},[e("div",{class:"flex items-center justify-center w-8 h-8 bg-gray-300 rounded-full"},[e("span",{class:"text-white text-sm font-bold"},"3")]),e("span",{class:"ml-2 text-sm font-medium"},"Upload Dokumen")])])],-1)),e("div",N,[e("div",T,[e("div",V,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informasi Pembayaran",-1)),e("div",I,[e("div",L,[t[2]||(t[2]=e("p",{class:"text-sm text-gray-600"},"Paket Umroh",-1)),e("p",S,m(f.jamaahData.paket_name||"Paket Premium"),1)]),e("div",q,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-600"},"Jumlah DP yang harus dibayar",-1)),e("p",A,"Rp "+m(x(g.value)),1)]),t[4]||(t[4]=e("div",{class:"bg-gray-50 p-4 rounded-lg"},[e("h4",{class:"font-semibold mb-2"},"Rekening Tujuan:"),e("div",{class:"space-y-2 text-sm"},[e("div",{class:"flex justify-between"},[e("span",null,"Bank:"),e("span",{class:"font-medium"},"BCA")]),e("div",{class:"flex justify-between"},[e("span",null,"No. Rekening:"),e("span",{class:"font-medium"},"1234567890")]),e("div",{class:"flex justify-between"},[e("span",null,"Atas Nama:"),e("span",{class:"font-medium"},"PT. Travel Umroh")])])],-1)),t[5]||(t[5]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},[e("div",{class:"flex"},[e("svg",{class:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"ml-3"},[e("h4",{class:"text-sm font-medium text-yellow-800"},"Penting!"),e("p",{class:"text-sm text-yellow-700 mt-1"}," Transfer sesuai nominal yang tertera. Upload bukti transfer yang jelas dan lengkap. ")])])],-1))])])]),e("div",G,[e("div",R,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Upload Bukti Transfer",-1)),e("form",{onSubmit:j(h,["prevent"]),class:"space-y-6"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nominal Yang Ditransfer * ",-1)),e("div",E,[t[7]||(t[7]=e("span",{class:"absolute left-3 top-3 text-gray-500"},"Rp",-1)),P(e("input",{"onUpdate:modelValue":t[0]||(t[0]=k=>s.value.dp_amount=k),type:"number",class:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"0",required:""},null,512),[[D,s.value.dp_amount]])]),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 mt-1"},"Masukkan nominal yang Anda transfer",-1))]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Bukti Transfer * ",-1)),e("div",H,[e("div",J,[t[12]||(t[12]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("div",K,[e("label",O,[t[10]||(t[10]=e("span",{class:"mt-2 block text-sm font-medium text-gray-900"}," Upload bukti transfer ",-1)),e("input",{ref_key:"fileInput",ref:v,type:"file",class:"sr-only",accept:"image/*",onChange:y,required:""},null,544),t[11]||(t[11]=e("span",{class:"mt-1 block text-xs text-gray-500"}," PNG, JPG, JPEG up to 2MB ",-1))])])])]),i.value?(r(),l("div",W,[e("div",Y,[t[13]||(t[13]=e("svg",{class:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),e("span",$,m(i.value.name),1)])])):c("",!0)]),e("div",Q,[d(p(B),{href:a.route("jamaah.dashboard"),class:"text-gray-600 hover:text-gray-900"},{default:u(()=>[...t[15]||(t[15]=[M(" ‚Üê Kembali ke Dashboard ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:o.value,class:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[o.value?(r(),l("span",Z,"Uploading...")):(r(),l("span",ee,"Konfirmasi Pembayaran"))],8,X)])],32)])])]),f.jamaahData.bukti_transfer?(r(),l("div",te,[...t[17]||(t[17]=[e("div",{class:"p-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Status Pembayaran"),e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-blue-800"},"Bukti transfer sudah diupload"),e("p",{class:"text-sm text-blue-600"},"Menunggu verifikasi dari admin")])])])],-1)])])):c("",!0)])])]),_:1})],64))}};export{ne as default};
