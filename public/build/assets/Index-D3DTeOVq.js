import{r as k,c as a,o as i,a as d,u as m,h as b,w as u,b as e,d as o,l as c,F as g,e as p,k as v,t as r,q as _,y as f}from"./app-Cbx_-bua.js";import{_ as w}from"./AdminLayout-m-tUBPSK.js";import"./ApplicationLogo-DKH-H1_m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CizZqq9U.js";const M={class:"py-12"},C={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},B={class:"p-6 border-b border-gray-200"},A={class:"flex justify-between items-center"},D={class:"flex space-x-3"},H=["disabled"],N={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-700",fill:"none",viewBox:"0 0 24 24"},T={key:1,class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},V={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},z={class:"bg-white divide-y divide-gray-200"},E={key:1},F={colspan:"5",class:"px-6 py-4 text-center text-gray-500"},K={class:"flex flex-col items-center justify-center py-8"},S={class:"px-6 py-4 whitespace-nowrap"},O={class:"text-sm font-medium text-gray-900"},R={key:0,class:"text-xs text-gray-500"},q={class:"px-6 py-4 whitespace-nowrap"},G={class:"text-sm text-gray-900"},I={class:"text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap"},L={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},P={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Q={class:"flex items-center justify-end space-x-2"},U=["onClick","disabled","title"],se={__name:"Index",props:{items:Object,filters:Object},setup(x){const l=k(!1),y=()=>{l.value=!0,f.reload({only:["items"],onFinish:()=>{l.value=!1}})},h=n=>{if(n.agents_count>0){alert("Tidak dapat menghapus marketing yang masih memiliki agen.");return}confirm(`Hapus marketing "${n.name}"?`)&&f.delete(route("admin.marketing.destroy",n.id),{onSuccess:()=>{},onError:t=>{console.error("Delete failed:",t),alert("Gagal menghapus data.")}})};return(n,t)=>(i(),a(g,null,[d(m(b),{title:"Master Data Marketing"}),d(w,null,{header:u(()=>[...t[0]||(t[0]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Master Data Marketing ",-1)])]),default:u(()=>[e("div",M,[e("div",C,[e("div",j,[e("div",B,[e("div",A,[t[5]||(t[5]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"Daftar Marketing"),e("p",{class:"mt-1 text-sm text-gray-600"}," Kelola data marketing dan agen yang berada di bawahnya ")],-1)),e("div",D,[e("button",{onClick:y,disabled:l.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[l.value?(i(),a("svg",N,[...t[1]||(t[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(i(),a("svg",T,[...t[2]||(t[2]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),t[3]||(t[3]=o(" Refresh ",-1))],8,H),d(m(c),{href:n.route("admin.marketing.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[...t[4]||(t[4]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),o(" Tambah Marketing ",-1)])]),_:1},8,["href"])])])]),e("div",V,[e("table",$,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kode & Nama "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kontak "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jumlah Agen "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),e("tbody",z,[l.value?(i(),a(g,{key:0},p(3,s=>e("tr",{key:`loading-${s}`},[...t[6]||(t[6]=[e("td",{class:"px-6 py-4 whitespace-nowrap",colspan:"5"},[e("div",{class:"animate-pulse flex space-x-4"},[e("div",{class:"rounded-full bg-gray-300 h-10 w-10"}),e("div",{class:"flex-1 space-y-2 py-1"},[e("div",{class:"h-4 bg-gray-300 rounded w-3/4"}),e("div",{class:"h-4 bg-gray-300 rounded w-1/2"})])])],-1)])])),64)):x.items.data.length===0?(i(),a("tr",E,[e("td",F,[e("div",K,[t[8]||(t[8]=e("svg",{class:"h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7h6l2 3h10M6 10v10m6-7v7m6-10v10"})],-1)),t[9]||(t[9]=e("p",{class:"text-lg font-medium text-gray-900 mb-2"},"Belum ada marketing",-1)),t[10]||(t[10]=e("p",{class:"text-gray-500 mb-4"},"Mulai dengan menambahkan data marketing",-1)),d(m(c),{href:n.route("admin.marketing.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700"},{default:u(()=>[...t[7]||(t[7]=[o(" Tambah Marketing Pertama ",-1)])]),_:1},8,["href"])])])])):(i(!0),a(g,{key:2},p(x.items.data,s=>(i(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",S,[e("div",null,[e("div",O,[o(r(s.code||"-")+" ",1),t[11]||(t[11]=e("span",{class:"text-gray-400"},"â€¢",-1)),o(" "+r(s.name),1)]),s.notes?(i(),a("div",R,r(s.notes),1)):v("",!0)])]),e("td",q,[e("div",G,r(s.phone||"-"),1),e("div",I,r(s.email||"-"),1)]),e("td",J,[e("span",{class:_([{"bg-green-100 text-green-800":s.status==="active","bg-gray-100 text-gray-800":s.status!=="active"},"inline-flex px-2 text-xs leading-5 font-semibold rounded-full"])},r(s.status==="active"?"Aktif":"Non Aktif"),3)]),e("td",L,r(s.agents_count??0)+" agen ",1),e("td",P,[e("div",Q,[d(m(c),{href:n.route("admin.marketing.edit",s.id),class:"text-indigo-600 hover:text-indigo-900 text-xs"},{default:u(()=>[...t[12]||(t[12]=[o(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:W=>h(s),class:"text-red-600 hover:text-red-900 text-xs",disabled:s.agents_count>0,title:s.agents_count>0?"Tidak dapat dihapus karena memiliki agen":""}," Hapus ",8,U)])])]))),128))])])])])])])]),_:1})],64))}};export{se as default};
